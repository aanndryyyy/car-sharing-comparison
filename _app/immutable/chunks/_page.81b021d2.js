var J=Object.defineProperty;var Q=(t,e,i)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var p=(t,e,i)=>(Q(t,typeof e!="symbol"?e+"":e,i),i);import{S,i as A,s as W,q as k,r as w,b as d,u as R,I as M,h as a,k as _,l as B,a as q,e as Y,c as H,m as U,H as E,n as z}from"./index.991bddc8.js";const V=""+new URL("../assets/bolt.de4e591b.png",import.meta.url).href;function Z(t){let e,i,s;return{c(){e=k("Minimum fee: "),i=k(t[0]),s=k(" €")},l(o){e=w(o,"Minimum fee: "),i=w(o,t[0]),s=w(o," €")},m(o,l){d(o,e,l),d(o,i,l),d(o,s,l)},p(o,[l]){l&1&&R(i,o[0])},i:M,o:M,d(o){o&&a(e),o&&a(i),o&&a(s)}}}function O(t,e,i){let{minimumFee:s}=e;return t.$$set=o=>{"minimumFee"in o&&i(0,s=o.minimumFee)},[s]}class $ extends S{constructor(e){super(),A(this,e,O,Z,W,{minimumFee:0})}}const j=(t,e)=>{const i=t.price,s=e.distance*i.km;let o=0;e.days>=1&&(o+=e.days*i.day);let l=0;e.hours>=1&&(e.hours*i.hour+e.minutes*i.minute>i.day?(o+=i.day,e.hours=0,e.minutes=0):l+=e.hours*i.hour);let r=0;e.minutes>=1&&(e.minutes*i.minute>i.hour?l+=i.hour:r+=e.minutes*i.minute);let f=s+o+l+r;return f<(i.min??1.99)&&(f=i.min??1.99),f};class ee{constructor(e){p(this,"carData");p(this,"rentTotalPrice");this.carData=e}getName(){return this.carData.name}calculateRentTotalPrice(e){this.rentTotalPrice=j(this.carData,e)}getTotalPrice(){if(this.rentTotalPrice==null)throw"Car total rent price is not calculated";return this.rentTotalPrice}getFormattedTotalPrice(){return this.getTotalPrice().toFixed(2)+" €"}getFormattedLongTermDiscount(){return"TODO"}getFormattedMinutePrice(){return this.carData.price.minute+" €/min"}getFormattedKilometrePrice(){return this.carData.price.km+" €/min"}getLogo(){return V}getDetailedDialog(){return{component:$,props:{minimumFee:this.carData.price.min}}}}const te=""+new URL("../assets/citybee.1fb802bf.svg",import.meta.url).href;function ie(t){let e,i,s,o,l,r,f,C,c,P;return{c(){e=k("Starting fee: "),i=k(t[1]),s=k(" €"),o=_("br"),l=k(`
Minimum fee: `),r=k(t[0]),f=k(" €"),C=_("br"),c=_("br"),P=k(`

Distance & duration packages available from app.`)},l(n){e=w(n,"Starting fee: "),i=w(n,t[1]),s=w(n," €"),o=B(n,"BR",{}),l=w(n,`
Minimum fee: `),r=w(n,t[0]),f=w(n," €"),C=B(n,"BR",{}),c=B(n,"BR",{}),P=w(n,`

Distance & duration packages available from app.`)},m(n,u){d(n,e,u),d(n,i,u),d(n,s,u),d(n,o,u),d(n,l,u),d(n,r,u),d(n,f,u),d(n,C,u),d(n,c,u),d(n,P,u)},p(n,[u]){u&2&&R(i,n[1]),u&1&&R(r,n[0])},i:M,o:M,d(n){n&&a(e),n&&a(i),n&&a(s),n&&a(o),n&&a(l),n&&a(r),n&&a(f),n&&a(C),n&&a(c),n&&a(P)}}}function se(t,e,i){let{minimumFee:s}=e,{startingFee:o}=e;return t.$$set=l=>{"minimumFee"in l&&i(0,s=l.minimumFee),"startingFee"in l&&i(1,o=l.startingFee)},[s,o]}class oe extends S{constructor(e){super(),A(this,e,se,ie,W,{minimumFee:0,startingFee:1})}}const K=(t,e)=>{let i=Math.floor(t/1440);t-=i*1440;let s=Math.floor(t/60);t-=s*60;let o=t,l=0;i>=1&&(l+=i*e.day);let r=0;s>=1&&(s*e.hour+o*e.minute>e.day?(l+=e.day,s=0,o=0):r+=s*e.hour);let f=0;return o>=1&&(o*e.minute>e.hour?r+=e.hour:f+=o*e.minute),{daysCost:l,hoursCost:r,minutesCost:f}};var v=(t=>(t.MONTH="MONTH",t.WEEK="WEEK",t.DAY="DAY",t))(v||{});class x{constructor(){p(this,"name",v.DAY);p(this,"days",0);p(this,"distance",0);p(this,"hours",0);p(this,"price",Number.MAX_SAFE_INTEGER)}}const re=(t,e)=>{const i=t.price,s=e.distance*i.km,o=e.days*24*60+e.hours*60+e.minutes;let{daysCost:l,hoursCost:r,minutesCost:f}=K(o,i);const C=.5+s+l+r+f;if(C<(i.min??2.29))return i.min??2.29;const c=ne(t,e,C,o);return c.price<C?c.price:C},ne=(t,e,i,s)=>{const o=t.packages,l=t.price;let r=new x;for(const f of o){const C=f.days*24*60+f.hours*60;if(f.price<i)if(e.distance<=f.distance&&s<=C&&f.price<r.price)r={...f};else{let c=f.price;if(e.distance>f.distance&&(c+=(e.distance-f.distance)*l.km),s>C){let P=s-C,n=K(P,l);c+=n.daysCost+n.hoursCost+n.minutesCost}c<i&&c<r.price&&(r={...f},r.price=c)}}return r};class le{constructor(e){p(this,"carData");p(this,"rentTotalPrice");this.carData=e}getName(){return this.carData.name}calculateRentTotalPrice(e){this.rentTotalPrice=re(this.carData,e)}getTotalPrice(){if(this.rentTotalPrice==null)throw"Car total rent price is not calculated";return this.rentTotalPrice}getFormattedTotalPrice(){return this.getTotalPrice().toFixed(2)+" €"}getFormattedLongTermDiscount(){return"TODO"}getFormattedMinutePrice(){return this.carData.price.minute+" €/min"}getFormattedKilometrePrice(){return this.carData.price.km+" €/min"}getLogo(){return te}getDetailedDialog(){return{component:oe,props:{minimumFee:this.carData.price.min,startingFee:this.carData.price.start}}}}const me=""+new URL("../assets/elmo.fdb90f36.png",import.meta.url).href;function X(t){let e,i,s,o,l;return{c(){e=k("Classy minimum fee: "),i=k(t[1]),s=k(" €"),o=_("br"),l=_("br")},l(r){e=w(r,"Classy minimum fee: "),i=w(r,t[1]),s=w(r," €"),o=B(r,"BR",{}),l=B(r,"BR",{})},m(r,f){d(r,e,f),d(r,i,f),d(r,s,f),d(r,o,f),d(r,l,f)},p(r,f){f&2&&R(i,r[1])},d(r){r&&a(e),r&&a(i),r&&a(s),r&&a(o),r&&a(l)}}}function ue(t){let e;return{c(){e=k("1.00 €/hour and 0.10 €/km")},l(i){e=w(i,"1.00 €/hour and 0.10 €/km")},m(i,s){d(i,e,s)},d(i){i&&a(e)}}}function fe(t){let e;return{c(){e=k("2.50 €/hour and 0.16 €/km")},l(i){e=w(i,"2.50 €/hour and 0.16 €/km")},m(i,s){d(i,e,s)},d(i){i&&a(e)}}}function ae(t){let e,i,s,o,l,r,f,C,c,P,n,u,y,L,h,b,F=t[0]==="classy"&&X(t);function I(m,T){return m[0]==="classy"?fe:ue}let N=I(t),D=N(t);return{c(){F&&F.c(),e=k(`

After 100km: `),i=k(t[2]),s=k("€/km"),o=_("br"),l=_("br"),r=k(`

Week rent includes 700km free`),f=_("br"),C=k(`
Month rent includes 3000km free`),c=_("br"),P=_("br"),n=q(),u=_("b"),y=k("Customer card:"),L=_("br"),h=q(),D.c(),b=Y()},l(m){F&&F.l(m),e=w(m,`

After 100km: `),i=w(m,t[2]),s=w(m,"€/km"),o=B(m,"BR",{}),l=B(m,"BR",{}),r=w(m,`

Week rent includes 700km free`),f=B(m,"BR",{}),C=w(m,`
Month rent includes 3000km free`),c=B(m,"BR",{}),P=B(m,"BR",{}),n=H(m),u=B(m,"B",{});var T=U(u);y=w(T,"Customer card:"),T.forEach(a),L=B(m,"BR",{}),h=H(m),D.l(m),b=Y()},m(m,T){F&&F.m(m,T),d(m,e,T),d(m,i,T),d(m,s,T),d(m,o,T),d(m,l,T),d(m,r,T),d(m,f,T),d(m,C,T),d(m,c,T),d(m,P,T),d(m,n,T),d(m,u,T),E(u,y),d(m,L,T),d(m,h,T),D.m(m,T),d(m,b,T)},p(m,[T]){m[0]==="classy"?F?F.p(m,T):(F=X(m),F.c(),F.m(e.parentNode,e)):F&&(F.d(1),F=null),T&4&&R(i,m[2]),N!==(N=I(m))&&(D.d(1),D=N(m),D&&(D.c(),D.m(b.parentNode,b)))},i:M,o:M,d(m){F&&F.d(m),m&&a(e),m&&a(i),m&&a(s),m&&a(o),m&&a(l),m&&a(r),m&&a(f),m&&a(C),m&&a(c),m&&a(P),m&&a(n),m&&a(u),m&&a(L),m&&a(h),D.d(m),m&&a(b)}}}function ce(t,e,i){let{type:s}=e,{classyMinimumFee:o}=e,{priceAfter100:l}=e;return t.$$set=r=>{"type"in r&&i(0,s=r.type),"classyMinimumFee"in r&&i(1,o=r.classyMinimumFee),"priceAfter100"in r&&i(2,l=r.priceAfter100)},[s,o,l]}class de extends S{constructor(e){super(),A(this,e,ce,ae,W,{type:0,classyMinimumFee:1,priceAfter100:2})}}class Ce{constructor(){p(this,"months",0);p(this,"weeks",0);p(this,"withNormalPricing",{daysCost:0,hoursCost:0,minutesCost:0,distanceCost:0});p(this,"price",1/0)}}class pe{constructor(){p(this,"3days",0);p(this,"day",0);p(this,"hour",0);p(this,"km",0);p(this,"min",0);p(this,"minute",0);p(this,"start",0);p(this,"week",0)}}class ye{constructor(){p(this,"timeLeft",0);p(this,"distanceLeft",0);p(this,"months",0);p(this,"weeks",0);p(this,"onlyWeeks",!1);p(this,"totalCost",0);p(this,"price",new pe);p(this,"weekPrice",new x);p(this,"monthPrice",new x)}}const ke=(t,e)=>{if(t.packages.length<2)throw"Elmo package data broken!";const i=t.price;let s=0;e.distance>100?s=100*i.km+(e.distance-100)*.1:s=e.distance*i.km;const o=e.days*24*60+e.hours*60+e.minutes;let{daysCost:l,hoursCost:r,minutesCost:f}=K(o,i);const C=new ye;C.timeLeft=o,C.distanceLeft=e.distance,C.price=i,C.weekPrice=t.packages[0],C.monthPrice=t.packages[1];const c=G(C,new Ce);let P=0,n=0;if((c.months>0||c.weeks>0)&&c.price<s+l+r+f){const y=t.packages.find(h=>h.name===v.MONTH),L=t.packages.find(h=>h.name===v.WEEK);P=c.months*y.price,n=c.weeks*L.price,l=c.withNormalPricing.daysCost,r=c.withNormalPricing.hoursCost,f=c.withNormalPricing.minutesCost,s=c.withNormalPricing.distanceCost}let u=P+n+l+r+f+s;return i.min&&u<i.min&&(u=i.min),u},G=(t,e)=>{if(t.totalCost>e.price)return e;if(t.timeLeft<=0&&t.distanceLeft<=0)return t.totalCost<e.price&&(e.price=t.totalCost,e.months=t.months,e.weeks=t.weeks,e.withNormalPricing={daysCost:0,hoursCost:0,minutesCost:0,distanceCost:0}),e;if(t.months>0||t.weeks>0){let i=t.totalCost,s={daysCost:0,hoursCost:0,minutesCost:0},o=0;t.timeLeft>0&&(s=K(t.timeLeft,t.price),i+=s.daysCost+s.hoursCost+s.minutesCost),t.distanceLeft>0&&(o=t.distanceLeft*.1,i+=o),i<e.price&&(e.months=t.months,e.weeks=t.weeks,e.price=i,e.withNormalPricing={daysCost:s.daysCost,hoursCost:s.hoursCost,minutesCost:s.minutesCost,distanceCost:o})}return t.onlyWeeks||(e=G({timeLeft:t.timeLeft-30*24*60,distanceLeft:t.distanceLeft-3e3,months:t.months+1,weeks:t.weeks,totalCost:t.totalCost+t.monthPrice.price,onlyWeeks:!1,price:t.price,weekPrice:t.weekPrice,monthPrice:t.monthPrice},e)),e=G({timeLeft:t.timeLeft-7*24*60,distanceLeft:t.distanceLeft-700,months:t.months,weeks:t.weeks+1,totalCost:t.totalCost+t.weekPrice.price,onlyWeeks:!0,price:t.price,weekPrice:t.weekPrice,monthPrice:t.monthPrice},e),e};class we{constructor(e){p(this,"carData");p(this,"rentTotalPrice");this.carData=e}getName(){return this.carData.name}calculateRentTotalPrice(e){this.rentTotalPrice=ke(this.carData,e)}getTotalPrice(){if(this.rentTotalPrice==null)throw"Car total rent price is not calculated";return this.rentTotalPrice}getFormattedTotalPrice(){return this.getTotalPrice().toFixed(2)+" €"}getFormattedLongTermDiscount(){return"TODO"}getFormattedMinutePrice(){return this.carData.price.minute+" €/min"}getFormattedKilometrePrice(){return this.carData.price+" €/min"}getLogo(){return me}getDetailedDialog(){return{component:de,props:{type:"something",priceAfter100:"something",classyMinimumFee:"something"}}}}const Te=(t,e)=>{const i=t.price;let s=e.minutes+e.hours*60,o=0,l=0;if(e.days>=7){const n=Math.floor(e.days/7);e.days-=n*7,l+=n*i.week,o+=n*7*300}let r=0;if(e.days>=3){const n=Math.floor(e.days/3);e.days-=n*3;const u=g(s,i);n*i["3days"]+e.days*i.day+u.daysCost+u.minutesCost>i.week?(l+=i.week,e.days=0,s=0,o+=7*300):(r+=n*i["3days"],o+=3*300)}let f=0;if(e.days>=1){const n=g(s,i);e.days*i.day+n.daysCost+n.minutesCost>i["3days"]?(r+=i["3days"],o+=3*300,s=0):(f+=e.days*i.day,o+=e.days*300)}const C=g(s,i);o+=C.freeDistance,f+=C.daysCost;const c=C.minutesCost,P=Math.max(e.distance-o,0)*i.km;return l+r+f+c+P+i.start},g=(t,e)=>{let i=0,s=0,o=0;return t>0&&(i+=300,t*e.minute>e.day?s+=e.day:o+=t*e.minute),{freeDistance:i,daysCost:s,minutesCost:o}},Pe=""+new URL("../assets/beast.eb8a2802.png",import.meta.url).href;function Fe(t){let e,i,s,o,l,r,f,C,c,P,n;return{c(){e=_("strong"),i=k("Required deposit: "),s=k(t[0]),o=k(" €"),l=q(),r=_("br"),f=_("br"),C=k(`
Deposits for under 21 or less than 1 year of driving experience: `),c=_("strong"),P=k(t[1]),n=k(" €"),this.h()},l(u){e=B(u,"STRONG",{class:!0});var y=U(e);i=w(y,"Required deposit: "),s=w(y,t[0]),o=w(y," €"),y.forEach(a),l=H(u),r=B(u,"BR",{}),f=B(u,"BR",{}),C=w(u,`
Deposits for under 21 or less than 1 year of driving experience: `),c=B(u,"STRONG",{class:!0});var L=U(c);P=w(L,t[1]),n=w(L," €"),L.forEach(a),this.h()},h(){z(e,"class","font-bold text-red-600"),z(c,"class","font-bold text-red-600")},m(u,y){d(u,e,y),E(e,i),E(e,s),E(e,o),d(u,l,y),d(u,r,y),d(u,f,y),d(u,C,y),d(u,c,y),E(c,P),E(c,n)},p(u,[y]){y&1&&R(s,u[0]),y&2&&R(P,u[1])},i:M,o:M,d(u){u&&a(e),u&&a(l),u&&a(r),u&&a(f),u&&a(C),u&&a(c)}}}function _e(t,e,i){let{depositBase:s}=e,{depositSpecial:o}=e;return t.$$set=l=>{"depositBase"in l&&i(0,s=l.depositBase),"depositSpecial"in l&&i(1,o=l.depositSpecial)},[s,o]}class Be extends S{constructor(e){super(),A(this,e,_e,Fe,W,{depositBase:0,depositSpecial:1})}}class Le{constructor(e){p(this,"carData");p(this,"rentTotalPrice");this.carData=e}getName(){return this.carData.name}calculateRentTotalPrice(e){this.rentTotalPrice=Te(this.carData,e)}getTotalPrice(){if(this.rentTotalPrice==null)throw"Car total rent price is not calculated";return this.rentTotalPrice}getFormattedTotalPrice(){return this.getTotalPrice().toFixed(2)+" €"}getFormattedLongTermDiscount(){return"TODO"}getFormattedMinutePrice(){return this.carData.price.minute+" €/min"}getFormattedKilometrePrice(){return this.carData.price.km+" €/km after 300km"}getLogo(){return Pe}getDetailedDialog(){return{component:Be,props:{depositBase:0,depositSpecial:0}}}}async function De({fetch:t}){const i=await(await t("data/bolt.json")).json();let s=[];i.forEach(y=>{s.push(new ee(y))});const l=await(await t("data/citybee.json")).json();let r=[];l.forEach(y=>{r.push(new le(y))});const C=await(await t("data/elmo.json")).json();let c=[];C.forEach(y=>{c.push(new we(y))});const n=await(await t("data/beast.json")).json();let u=[];return n.forEach(y=>{u.push(new Le(y))}),{boltCars:s,cityBeeCars:r,elmoCars:c,beastCars:u}}const Re=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));export{Re as _,De as l};
